import { ArgsTable, Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { ChatFeed } from '.';
import { Props } from './props';

import {
  onePersonChat,
  message1001,
  messageByBob1002,
  messageTwoByBob1003,
  messagePlusAttachments1004,
} from '../../util/mocks';

<Meta
  title="ChatEngine/ChatFeed"
  component={ChatFeed}
  argTypes={{
    chatFeedStyle: { table: { category: 'styles' } },
    chatHeaderStyle: { table: { category: 'styles' } },
    messageListStyle: { table: { category: 'styles' } },
    messageFormStyle: { table: { category: 'styles' } },
  }}
/>

export const Template = (args) => <ChatFeed {...args} />;

# Chat Feed

The Chat Feed represents all the activity currently going on within one chat.

It stacks the `<ChatHeader/>`, `<MessageList/>`, and `<MessageForm/>` in an easy, understandable way.

## Default

<Story
  name="Default"
  args={{
    messages: {
      '2021-07-14 01:30:24.567443+00:00': messagePlusAttachments1004,
      '2021-07-14 01:40:24.567443+00:00': messageByBob1002,
      '2021-07-14 01:41:24.567443+00:00': messageTwoByBob1003,
    },
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      boxShadow: '0px 0px 3px 6px rgba(0, 0, 0, 0.1)',
    },
  }}
>
  {Template.bind({})}
</Story>

<ArgsTable story="Default" />

## Chat

Passing a Chat object into the `chat` prop will allow/set the header values and read-receipts.

<Story
  name="Chat"
  args={{
    chat: onePersonChat,
    messages: {
      '2021-07-14 01:30:24.567443+00:00': messagePlusAttachments1004,
      '2021-07-14 01:40:24.567443+00:00': messageByBob1002,
      '2021-07-14 01:41:24.567443+00:00': messageTwoByBob1003,
    },
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      boxShadow: '0px 0px 3px 6px rgba(0, 0, 0, 0.1)',
    },
  }}
>
  {Template.bind({})}
</Story>

## My Username

You can use the `myUsername` prop to specify which messages were sent by this user. Then any `message` component with a matching `sender_username` will inherit `isMyMessage={true}`.

<Story
  name="My Username"
  args={{
    chat: onePersonChat,
    myUsername: 'Adam_La_Morre',
    messages: {
      '2021-07-14 01:30:24.567443+00:00': messagePlusAttachments1004,
      '2021-07-14 01:40:24.567443+00:00': messageByBob1002,
      '2021-07-14 01:41:24.567443+00:00': messageTwoByBob1003,
    },
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      boxShadow: '0px 0px 3px 6px rgba(0, 0, 0, 0.1)',
    },
  }}
>
  {Template.bind({})}
</Story>

## Is Loading

If the chat is loading initial message, set `isLoading` to `true` for the following style.

<Story
  name="Is Loading"
  args={{
    isLoading: true,
    messages: {},
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      boxShadow: '0px 0px 3px 6px rgba(0, 0, 0, 0.1)',
    },
  }}
>
  {Template.bind({})}
</Story>

## Has More Messages

If this Chat room has more Messages, set the `hasMoreMessages` prop to `true`.

This is used to load more messages once at the top of the Chat Feed.

<Story
  name="Has More Messages"
  args={{
    chat: onePersonChat,
    hasMoreMessages: true,
    messages: {
      '2021-07-14 01:01:00.000000+00:00': message1001,
      '2021-07-14 01:02:00.000000+00:00': messageByBob1002,
      '2021-07-14 01:03:00.000000+00:00': messageTwoByBob1003,
      '2021-07-14 01:04:00.000000+00:00': messagePlusAttachments1004,
    },
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      boxShadow: '0px 0px 3px 6px rgba(0, 0, 0, 0.1)',
    },
  }}
>
  {Template.bind({})}
</Story>

## Custom Style

You can change the look and feel with the `customStyle` prop. It uses the `ChatFeedStyles` interface which inherits from `ChatHeaderStyles`, and `MessageFormStyles`.

<Story
  name="Custom Style"
  args={{
    chat: onePersonChat,
    messages: {
      '2021-07-14 01:30:24.567443+00:00': messagePlusAttachments1004,
      '2021-07-14 01:40:24.567443+00:00': messageByBob1002,
      '2021-07-14 01:41:24.567443+00:00': messageTwoByBob1003,
    },
    chatFeedStyle: {
      height: '500px',
      maxWidth: '600px',
      border: '2px solid red',
    },
  }}
>
  {Template.bind({})}
</Story>
